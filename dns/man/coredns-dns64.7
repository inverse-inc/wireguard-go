.\" Generated by Mmark Markdown Processer - mmark.miek.nl
.TH "COREDNS-DNS64" 7 "October 2020" "CoreDNS" "CoreDNS Plugins"

.SH "NAME"
.PP
\fIdns64\fP - enables DNS64 IPv6 transition mechanism.

.SH "DESCRIPTION"
.PP
The \fIdns64\fP plugin will when asked for a domain's AAAA records, but only finds A records,
synthesizes the AAAA records from the A records.

.PP
The synthesis is \fIonly\fP performed \fBif the query came in via IPv6\fP.

.PP
This translation is for IPv6-only networks that have NAT64
\[la]https://en.wikipedia.org/wiki/NAT64\[ra].

.SH "SYNTAX"
.PP
.RS

.nf
dns64 [PREFIX]

.fi
.RE

.IP \(bu 4
\fBPREFIX\fP defines a custom prefix instead of the default \fB\fC64:ff9b::/96\fR.


.PP
Or use this slightly longer form with more options:

.PP
.RS

.nf
dns64 [PREFIX] {
    [translate\_all]
    prefix PREFIX
}

.fi
.RE

.IP \(bu 4
\fB\fCprefix\fR specifies any local IPv6 prefix to use, instead of the well known prefix (64:ff9b::/96)
.IP \(bu 4
\fB\fCtranslate_all\fR translates all queries, including responses that have AAAA results.


.SH "EXAMPLES"
.PP
Translate with the default well known prefix. Applies to all queries (if they came in over IPv6).

.PP
.RS

.nf
\&. {
    dns64
}

.fi
.RE

.PP
Use a custom prefix.

.PP
.RS

.nf
\&. {
    dns64 64:1337::/96
}

.fi
.RE

.PP
Or

.PP
.RS

.nf
\&. {
    dns64 {
        prefix 64:1337::/96
    }
}

.fi
.RE

.PP
Enable translation even if an existing AAAA record is present.

.PP
.RS

.nf
\&. {
    dns64 {
        translate\_all
    }
}

.fi
.RE

.SH "METRICS"
.PP
If monitoring is enabled (via the \fIprometheus\fP plugin) then the following metrics are exported:

.IP \(bu 4
\fB\fCcoredns_dns64_requests_translated_total{server}\fR - counter of DNS requests translated


.PP
The \fB\fCserver\fR label is explained in the \fIprometheus\fP plugin documentation.

.SH "BUGS"
.PP
Not all features required by DNS64 are implemented, only basic AAAA synthesis.

.IP \(bu 4
Support "mapping of separate IPv4 ranges to separate IPv6 prefixes"
.IP \(bu 4
Resolve PTR records
.IP \(bu 4
Make resolver DNSSEC aware. See: RFC 6147 Section 3
\[la]https://tools.ietf.org/html/rfc6147#section-3\[ra]


.SH "ALSO SEE"
.PP
See RFC 6147
\[la]https://tools.ietf.org/html/rfc6147\[ra] for more information on the DNS64 mechanism.

