.\" Generated by Mmark Markdown Processer - mmark.miek.nl
.TH "COREDNS-PPROF" 7 "October 2020" "CoreDNS" "CoreDNS Plugins"

.SH "NAME"
.PP
\fIpprof\fP - publishes runtime profiling data at endpoints under \fB\fC/debug/pprof\fR.

.SH "DESCRIPTION"
.PP
You can visit \fB\fC/debug/pprof\fR on your site for an index of the available endpoints. By default it
will listen on localhost:6053.

.PP
This is a debugging tool. Certain requests (such as collecting execution traces) can be slow. If
you use pprof on a live server, consider restricting access or enabling it only temporarily.

.PP
This plugin can only be used once per Server Block.

.SH "SYNTAX"
.PP
.RS

.nf
pprof [ADDRESS]

.fi
.RE

.PP
Optionally pprof takes an address; the default is \fB\fClocalhost:6053\fR.

.PP
An extra option can be set with this extended syntax:

.PP
.RS

.nf
pprof [ADDRESS] {
   block [RATE]
}

.fi
.RE

.IP \(bu 4
\fB\fCblock\fR option enables block profiling, \fBRATE\fP defaults to 1. \fBRATE\fP must be a positive value.
See Diagnostics, chapter profiling
\[la]https://golang.org/doc/diagnostics.html\[ra] and
runtime.SetBlockProfileRate
\[la]https://golang.org/pkg/runtime/#SetBlockProfileRate\[ra] for what block
profiling entails.


.SH "EXAMPLES"
.PP
Enable a pprof endpoint:

.PP
.RS

.nf
\&. {
    pprof
}

.fi
.RE

.PP
And use the pprof tool to get statistics: \fB\fCgo tool pprof http://localhost:6053\fR.

.PP
Listen on an alternate address:

.PP
.RS

.nf
\&. {
    pprof 10.9.8.7:6060
}

.fi
.RE

.PP
Listen on an all addresses on port 6060, and enable block profiling

.PP
.RS

.nf
\&. {
    pprof :6060 {
       block
    }
}

.fi
.RE

.SH "ALSO SEE"
.PP
See Go's pprof documentation
\[la]https://golang.org/pkg/net/http/pprof/\[ra] and Profiling Go
Programs
\[la]https://blog.golang.org/profiling-go-programs\[ra].

.PP
See runtime.SetBlockProfileRate
\[la]https://golang.org/pkg/runtime/#SetBlockProfileRate\[ra] for
background on block profiling.

